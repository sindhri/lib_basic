%20130225
%configuration
%categorynames, baseline and channel cluster configuration
category_names = {'nogo_correct','go_correct'};
baseline= 1000;
channel_clusters = {{[104,105,111,110,103,93,87],[92,86,98,97,91,85]},...    %104 set
    {[104,105,111,110,103,93,87],[96,101,100,95]},...
    {[104,105,111,110,103,93,87],[83,76,84,90,89,82]},...
    {[104,105,111,110,103,93,87],[62,54,79,78,77,72,67,61]},...
    {[104,105,111,110,103,93,87],[70,66,71,75,74,69]},...
    {[104,105,111,110,103,93,87],[52,47,53,60,59,51]},...
    {[104,105,111,110,103,93,87],[58,50,57,64]},...
    {[92,86,98,97,91,85],[96,101,100,95]},... %92 set
    {[92,86,98,97,91,85],[83,76,84,90,89,82]},...
    {[92,86,98,97,91,85],[62,54,79,78,77,72,67,61]},...
    {[92,86,98,97,91,85],[70,66,71,75,74,69]},...
    {[92,86,98,97,91,85],[52,47,53,60,59,51]},...
    {[92,86,98,97,91,85],[58,50,57,64]},...
    {[96,101,100,95],[83,76,84,90,89,82]},... %96 set
    {[96,101,100,95],[62,54,79,78,77,72,67,61]},...
    {[96,101,100,95],[70,66,71,75,74,69]},...
    {[96,101,100,95],[52,47,53,60,59,51]},...
    {[96,101,100,95],[58,50,57,64]},...
    {[83,76,84,90,89,82],[62,54,79,78,77,72,67,61]},... %83 set
    {[83,76,84,90,89,82],[70,66,71,75,74,69]},...
    {[83,76,84,90,89,82],[52,47,53,60,59,51]},...
    {[83,76,84,90,89,82],[58,50,57,64]},...
    {[70,66,71,75,74,69],[62,54,79,78,77,72,67,61]},... %62 set
    {[62,54,79,78,77,72,67,61],[52,47,53,60,59,51]},...
    {[62,54,79,78,77,72,67,61],[58,50,57,64]},...
    {[70,66,71,75,74,69],[52,47,53,60,59,51]},... %70 set
    {[52,47,53,60,59,51],[58,50,57,64]},...%58 52
    }; %pair4


%create cluster names
channel_names = TS_get_channel_pair_names(channel_clusters,1);


%import file and read data
alleeg = read_egi_multiple_by_categorynames(category_names);


%calculate coherence
[all_coh,timesout,freqsout,...
id_list,trial_list] = TS_coh_calculation(alleeg,channel_clusters,baseline);


%export
[dataset_data,dataset_label] =TS_coh_export(all_coh,...
        timesout,freqsout,id_list,channel_names);

%plotting
TS_coh_plot(all_coh,timesout,freqsout,id_list,channel_names);