%20130225
%configuration
%categorynames, baseline and channel cluster configuration
category_names = {'nogo_correct','go_correct'};
baseline= 1000;
channel_clusters = {{[36,35,29,30,41,42,47],[24,27,23,19,28,20]},...%pair 1
    {[36,35,29,30,41,42,47],[11,18,16,10,12,5]},... %pair2
    {[104,105,111,110,103,93,87],[11,18,16,10,12,5]},...%pair3
    {[104,105,111,110,103,93,87],[124,4,3,123,118,117]},...
    {[11,11,18,16,10,12,5],[24,27,23,19,28,20]},...%11 set
    {[11,11,18,16,10,12,5],[92,86,98,97,91,85]},...
    {[11,11,18,16,10,12,5],[96,101,100,95]},...
    {[11,11,18,16,10,12,5],[83,76,84,90,89,82]},...
    {[11,11,18,16,10,12,5],[62,54,79,78,77,72,67,61]},...
    {[11,11,18,16,10,12,5],[70,66,71,75,74,69]},...
    {[11,11,18,16,10,12,5],[52,47,53,60,59,51]},...
    {[11,11,18,16,10,12,5],[58,50,57,64]},...
    {[24,27,23,19,28,20],[104,105,111,110,103,93,8]},...%24 set
    {[24,27,23,19,28,20],[92,86,98,97,91,85]},...
    {[24,27,23,19,28,20],[96,101,100,95]},...
    {[24,27,23,19,28,20],[83,76,84,90,89,82]},...
    {[24,27,23,19,28,20],[62,54,79,78,77,72,67,61]},...
    {[24,27,23,19,28,20],[70,66,71,75,74,69]},...
    {[24,27,23,19,28,20],[52,47,53,60,59,51]},...
    {[24,27,23,19,28,20],[58,50,57,64]},...
    {[124,4,3,123,118,117],[36,35,29,30,41,42,47]},...%124 set
    {[124,4,3,123,118,117],[92,86,98,97,91,85]},...
    {[124,4,3,123,118,117],[96,101,100,95]},...
    {[124,4,3,123,118,117],[83,76,84,90,89,82]},...
    {[124,4,3,123,118,117],[62,54,79,78,77,72,67,61]},...
    {[124,4,3,123,118,117],[70,66,71,75,74,69]},...
    {[124,4,3,123,118,117],[52,47,53,60,59,51]},...
    {[124,4,3,123,118,117],[58,50,57,64]},...
    {[36,35,29,30,41,42,47],[104,105,111,110,103,93,87]},...%36 set
    {[36,35,29,30,41,42,47],[92,86,98,97,91,85]},...
    {[36,35,29,30,41,42,47],[96,101,100,95]},...
    {[36,35,29,30,41,42,47],[83,76,84,90,89,82]},...
    {[36,35,29,30,41,42,47],[62,54,79,78,77,72,67,61]},...
    {[36,35,29,30,41,42,47],[70,66,71,75,74,69]},...
    {[36,35,29,30,41,42,47],[52,47,53,60,59,51]},...
    {[36,35,29,30,41,42,47],[58,50,57,64]},...
    {[104,105,111,110,103,93,87],[92,86,98,97,91,85]},...    %104 set
    {[104,105,111,110,103,93,87],[96,101,100,95]},...
    {[104,105,111,110,103,93,87],[83,76,84,90,89,82]},...
    {[104,105,111,110,103,93,87],[62,54,79,78,77,72,67,61]},...
    {[104,105,111,110,103,93,87],[70,66,71,75,74,69]},...
    {[104,105,111,110,103,93,87],[52,47,53,60,59,51]},...
    {[104,105,111,110,103,93,87],[58,50,57,64]},...
    {[92,86,98,97,91,85],[96,101,100,95]},... %92 set
    {[92,86,98,97,91,85],[83,76,84,90,89,82]},...
    {[92,86,98,97,91,85],[62,54,79,78,77,72,67,61]},...
    {[92,86,98,97,91,85],[70,66,71,75,74,69]},...
    {[92,86,98,97,91,85],[52,47,53,60,59,51]},...
    {[92,86,98,97,91,85],[58,50,57,64]},...
    {[96,101,100,95],[83,76,84,90,89,82]},... %96 set
    {[96,101,100,95],[62,54,79,78,77,72,67,61]},...
    {[96,101,100,95],[70,66,71,75,74,69]},...
    {[96,101,100,95],[52,47,53,60,59,51]},...
    {[96,101,100,95],[58,50,57,64]},...
    {[83,76,84,90,89,82],[62,54,79,78,77,72,67,61]},... %83 set
    {[83,76,84,90,89,82],[70,66,71,75,74,69]},...
    {[83,76,84,90,89,82],[52,47,53,60,59,51]},...
    {[83,76,84,90,89,82],[58,50,57,64]},...
    {[70,66,71,75,74,69],[62,54,79,78,77,72,67,61]},... %62 set
    {[62,54,79,78,77,72,67,61],[52,47,53,60,59,51]},...
    {[62,54,79,78,77,72,67,61],[58,50,57,64]},...
    {[70,66,71,75,74,69],[52,47,53,60,59,51]},... %70 set
    {[52,47,53,60,59,51],[58,50,57,64]},...%58 52
    }; %pair4


%create cluster names
channel_names = TS_get_channel_pair_names(channel_clusters,1);


%import file and read data
alleeg = read_egi_multiple_by_categorynames(category_names);


%calculate coherence
[all_coh,timesout,freqsout,...
id_list,trial_list] = TS_coh_calculation(alleeg,channel_clusters,baseline);


%export
[dataset_data,dataset_label] =TS_coh_export(all_coh,...
        timesout,freqsout,id_list,channel_names);

%plotting
TS_coh_plot(all_coh,timesout,freqsout,id_list,channel_names);